# Technical Specifications

This document outlines the technical specifications for the FastAPI Agent System, including API endpoints, data models, and system behavior.

## API Endpoints

### Core Endpoints

1. **Root Endpoint**
   - **URL:** `/`
   - **Method:** GET
   - **Description:** Returns a welcome message
   - **Response:** `{"message": "Welcome to the FastAPI Agent System!"}`

2. **Health Check**
   - **URL:** `/health`
   - **Method:** GET
   - **Description:** Verifies system status
   - **Response:** `{"status": "ok", "message": "Healthy"}`

3. **List All Agents**
   - **URL:** `/agents`
   - **Method:** GET
   - **Description:** Returns a list of all available agents with descriptions and instructions
   - **Response:**
     ```json
     {
       "agents": [
         {
           "name": "hello_world",
           "description": "Returns a simple hello world message.",
           "instructions": "Call /hello_world with no additional parameters."
         },
         // ... other agents
       ]
     }
     ```

### Dedicated Agent Endpoints

1. **Hello World Agent**
   - **URL:** `/hello_world`
   - **Method:** GET
   - **Description:** Returns a hello world message
   - **Response:** `{"agent": "hello_world", "result": "Hello, World from the agent!"}`

2. **Goodbye Agent**
   - **URL:** `/goodbye`
   - **Method:** GET
   - **Description:** Returns a goodbye message
   - **Response:** `{"agent": "goodbye", "result": "Goodbye from the agent!"}`

3. **Echo Agent**
   - **URL:** `/echo`
   - **Method:** GET
   - **Description:** Returns an echo message
   - **Response:** `{"agent": "echo", "result": {"message": "Echo from agent!"}}`

4. **Time Agent**
   - **URL:** `/time`
   - **Method:** GET
   - **Description:** Returns current UTC time
   - **Response:** `{"agent": "time", "result": {"time": "2025-02-24T21:13:25Z"}}`

5. **Joke Agent**
   - **URL:** `/joke`
   - **Method:** GET
   - **Description:** Returns a random programming joke
   - **Response:** `{"agent": "joke", "result": {"joke": "<random programming joke>"}}`

6. **Quote Agent**
   - **URL:** `/quote`
   - **Method:** GET
   - **Description:** Returns a random inspirational quote
   - **Response:** `{"agent": "quote", "result": {"quote": "<random inspirational quote>"}}`

7. **Math Agent**
   - **URL:** `/math`
   - **Method:** GET
   - **Parameters:**
     - `token` (required): Must be "MATH_SECRET"
     - `expression` (required): Mathematical expression to evaluate
   - **Description:** Evaluates mathematical expressions after token verification
   - **Response:** `{"agent": "math", "result": <evaluated result>}`
   - **Example:** `/math?token=MATH_SECRET&expression=3*(4%2B2)` returns `{"agent": "math", "result": 18}`

8. **Classifier Agent**
   - **URL:** `/classifier`
   - **Method:** GET
   - **Parameters:**
     - `INPUT_TEXT` (required): Text to classify
   - **Description:** Classifies input text into categories with confidence scores
   - **Response:** `{"agent": "classifier", "result": {"classification": "<category>", "confidence": <score>}}`
   - **Example:** `/classifier?INPUT_TEXT=Hello,%20how%20are%20you?` returns `{"agent": "classifier", "result": {"classification": "Question", "confidence": 0.67}}`

9. **Summarizer Agent**
   - **URL:** `/summarizer`
   - **Method:** GET
   - **Parameters:**
     - `TEXT_TO_SUMMARIZE` (required): Text to summarize
   - **Description:** Creates a concise summary of the input text
   - **Response:** `{"agent": "summarizer", "result": {"summary": "<summary>", "explanation": "<explanation>"}}`
   - **Example:** `/summarizer?TEXT_TO_SUMMARIZE=FastAPI%20is%20an%20efficient%20framework.` returns `{"agent": "summarizer", "result": {"summary": "FastAPI is an efficient framework...", "explanation": "Summary generated by extracting the first sentence."}}`

### Legacy Endpoint

1. **Dynamic Agent Execution**
   - **URL:** `/agent/{agent_name}`
   - **Method:** GET
   - **Description:** Legacy endpoint that dynamically loads and executes any agent
   - **Parameters:** Varies by agent
   - **Response:** `{"agent": "<agent_name>", "result": <agent output>}`
   - **Note:** Maintained for backward compatibility

## Error Handling

All endpoints follow consistent error handling:

1. **Not Found (404)**
   - Returned when an agent is not found
   - Response: `{"detail": "Agent not found."}`

2. **Server Error (500)**
   - Returned for execution errors
   - Response: `{"detail": "Error executing agent: <error message>"}`

## Response Format

All successful responses follow a consistent format:
```json
{
  "agent": "<agent_name>",
  "result": <agent-specific output>
}
```

## Security Considerations

1. **Math Agent**
   - Requires token verification
   - Uses AST parsing for safe expression evaluation
   - Prevents code injection

2. **Input Validation**
   - All parameters are validated before processing
   - Error messages are sanitized to prevent information leakage
